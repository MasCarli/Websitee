<!DOCTYPE html>
<html lang="id"><head>
  
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MasCarli Store | Hosting & Script Premium</title>
  <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/MasCarli/MasCarli/main/icon.png">
</head>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    :root{
      --accent:#00e5ff;
      --accent-dark:#00bcd4;
      --bg1: #0a0f1f;
      --bg2: #0f233a;
      --card-bg: rgba(255,255,255,0.04);
      --glass: rgba(0,0,0,0.55);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background: radial-gradient(circle at top left, var(--bg1), #09121f, var(--bg2));
      color:#e0f7fa;
      min-height:100vh;
    }
    header{
      text-align:center;
      padding:28px 20px 24px;
      background:var(--glass);
      border-bottom:2px solid var(--accent);
      box-shadow:0 0 20px rgba(0,229,255,0.12);
    }
    header img{
      display:block;
      margin:0 auto 14px;
      max-width:180px;
      height:auto;
      border-radius:10px;
      box-shadow:0 0 12px rgba(0,229,255,0.25);
    }
    @media (max-width:768px){ header img{ max-width:130px; } }
    header h1{ margin:6px 0; color:var(--accent); font-size:1.9rem; }
    header p{ margin:6px 0 0; color:#b2ebf2; }

    nav{
      display:flex; flex-wrap:wrap; justify-content:center; gap:8px;
      padding:12px; background:var(--glass);
      border-bottom:1px solid rgba(0,188,212,0.15);
    }
    .nav-btn{
      background: rgba(0,0,0,0.45);
      color:#fff; border:1px solid var(--accent);
      padding:9px 14px; border-radius:10px;
      cursor:pointer; font-weight:600;
      transition:all .18s;
    }
    .nav-btn:hover{ background:var(--accent); color:#000; box-shadow:0 0 12px var(--accent); }

    .nav-cart{display:inline-flex;align-items:center;gap:8px;}
    #cart-count{
      background:var(--accent);
      color:#000; border-radius:999px;
      padding:2px 8px; font-weight:700; font-size:0.85rem;
    }

    main{ padding:30px 16px 60px; max-width:1100px; margin:0 auto; }
    .page{ display:none; animation:fadeIn .4s ease both; }
    .page.active{ display:block; }
    @keyframes fadeIn{ from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:none} }

    .search-wrap{ text-align:center; margin-bottom:18px; }
    #searchBox{
      width:90%; max-width:420px; padding:12px 14px;
      border-radius:10px; border:1px solid rgba(0,229,255,0.18);
      background:rgba(0,0,0,0.45); color:#e0f7fa; outline:none;
      font-size:1rem;
    }

    .product{
      background:var(--card-bg);
      border:1px solid rgba(0,229,255,0.12);
      border-radius:14px; padding:16px; margin:14px auto;
      max-width:520px; box-shadow:0 6px 18px rgba(0,0,0,0.4);
      text-align:left;
    }
    .product h3{ color:var(--accent); margin:0 0 6px; font-size:1.05rem; }
    .product p{ margin:6px 0 12px; color:#d8fbff; }
    .product .actions{ display:flex; gap:10px; align-items:center; }
    .btn{ padding:9px 14px; border-radius:10px; border:none; cursor:pointer; font-weight:700; }
    .btn-add{ background:linear-gradient(90deg,var(--accent-dark),var(--accent)); color:#000; }
    .btn-order{ background:transparent; border:1px solid var(--accent); color:var(--accent); }

    #cart-items{ margin-top:10px; }
    .cart-item{
      background:var(--card-bg); border:1px solid rgba(0,229,255,0.12);
      padding:12px; border-radius:10px; margin:10px auto;
      max-width:520px; display:flex; justify-content:space-between; align-items:center; gap:10px;
    }
    .cart-item .left{ max-width:70%; }
    .cart-item h4{ margin:0; color:var(--accent); font-size:1rem; }
    .cart-item p{ margin:6px 0 0; color:#d8fbff; font-weight:600; }
    .remove-btn{ background:#ff5252; color:#fff; border:none; padding:8px 10px; border-radius:8px; cursor:pointer; }
    .cart-summary{ max-width:520px; margin:16px auto 0; text-align:right; color:#d8fbff; font-weight:700; }
    .checkout-btn{
      display:block; margin:18px auto 0;
      background:linear-gradient(90deg,var(--accent-dark),var(--accent));
      color:#000; border:none; padding:12px 20px;
      border-radius:10px; font-weight:800; cursor:pointer;
    }

    .qris{ display:block; max-width:260px; margin:12px auto; border-radius:10px; box-shadow:0 0 12px rgba(0,229,255,0.16); cursor:pointer; }

    footer{
      text-align:center; padding:18px 8px; color:#b2ebf2;
      background:rgba(0,0,0,0.45);
      border-top:1px solid rgba(0,229,255,0.06);
      margin-top:30px;
    }
    @media (max-width:520px){
      .product{ padding:12px; }
      .cart-item{ flex-direction:column; align-items:flex-start; }
      .cart-item .left{ max-width:100% }
      .cart-summary{ text-align:left; padding:0 12px; }
    }

    /* Popup QRIS - enhanced: blur, fade, close btn, body-lock */
    .qris-popup {
      position: fixed;
      inset: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(8px);
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
      transition: opacity .25s ease, visibility .25s ease;
      z-index: 999;
    }
    .qris-popup.active {
      opacity: 1;
      visibility: visible;
      pointer-events: auto;
    }
    .qris-popup .popup-inner {
      position: relative;
      padding: 8px;
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .qris-popup img {
      max-width: 92%;
      max-height: 92%;
      border-radius: 12px;
      box-shadow: 0 0 25px rgba(0,229,255,0.5);
      transform: scale(.98);
      transition: transform .25s ease, opacity .2s ease;
      opacity: 0;
    }
    .qris-popup.active img {
      transform: scale(1);
      opacity: 1;
    }
    .close-btn {
      position: absolute;
      top: 14px;
      right: 18px;
      font-size: 28px;
      color: #fff;
      background: transparent;
      border: none;
      cursor: pointer;
      padding: 4px 8px;
      line-height: 1;
    }
    .close-btn:focus { outline: 2px solid var(--accent); border-radius:6px; }

    .no-scroll { overflow: hidden; height: 100%; }
  </style>
</head>

<body>
  <header>
    <img src="https://raw.githubusercontent.com/MasCarli/MasCarli/main/icon.png" alt="MasCarli Logo">
    <h1><i class="fa-solid fa-cloud"></i> MasCarli Store Hosting Terpercaya 100%</h1>
    <p>Hosting & Script Premium â€” Murah, Cepat, dan Terpercaya</p>
  </header>

  <nav>
    <button class="nav-btn" onclick="showPage('search')"><i class="fa-solid fa-magnifying-glass"></i> SEARCH</button>
    <button class="nav-btn" onclick="showPage('hosting')"><i class="fa-solid fa-server"></i> HOSTING</button>
    <button class="nav-btn" onclick="showPage('script')"><i class="fa-solid fa-code"></i> SCRIPT</button>
    <button class="nav-btn" onclick="showPage('cart')"><i class="fa-solid fa-cart-shopping"></i> KERANJANG <span id="cart-count">0</span></button>
    <button class="nav-btn" onclick="showPage('metode')"><i class="fa-solid fa-credit-card"></i> METODE PEMBAYARAN</button>
    <button class="nav-btn" onclick="showPage('bantuan')"><i class="fa-solid fa-headset"></i> Bantuan 24/7</button>
  </nav>

  <main>
    <!-- SEARCH -->
    <section id="search" class="page active">
      <div class="search-wrap">
        <h2>SEARCH PRODUCT</h2>
        <input id="searchBox" type="text" placeholder="Ketik nama produk..." />
      </div>
      <div id="searchResults"><div class="product">
          <h3>Script Jasher - Enc</h3>
          <p>Harga: <strong>Rp 4.000</strong></p>
          <div class="actions">
            <button class="btn btn-add" onclick="addToCart(Script Jasher - Enc)">Tambah ke Keranjang</button>
            <button class="btn btn-order" onclick="orderNow(Script Jasher - Enc)">Order via WhatsApp</button>
          </div>
        </div><div class="product">
          <h3>Script Jasher - No Enc</h3>
          <p>Harga: <strong>Rp 5.000</strong></p>
          <div class="actions">
            <button class="btn btn-add" onclick="addToCart(Script Jasher - No Enc)">Tambah ke Keranjang</button>
            <button class="btn btn-order" onclick="orderNow(Script Jasher - No Enc)">Order via WhatsApp</button>
          </div>
        </div><div class="product">
          <h3>Script Obf - Enc</h3>
          <p>Harga: <strong>Rp 4.000</strong></p>
          <div class="actions">
            <button class="btn btn-add" onclick="addToCart(Script Obf - Enc)">Tambah ke Keranjang</button>
            <button class="btn btn-order" onclick="orderNow(Script Obf - Enc)">Order via WhatsApp</button>
          </div>
        </div><div class="product">
          <h3>Script Obf - No Enc</h3>
          <p>Harga: <strong>Rp 5.000</strong></p>
          <div class="actions">
            <button class="btn btn-add" onclick="addToCart(Script Obf - No Enc)">Tambah ke Keranjang</button>
            <button class="btn btn-order" onclick="orderNow(Script Obf - No Enc)">Order via WhatsApp</button>
          </div>
        </div><div class="product">
          <h3>Script Surya Crash - Enc</h3>
          <p>Harga: <strong>Rp 5.000</strong></p>
          <div class="actions">
            <button class="btn btn-add" onclick="addToCart(Script Surya Crash - Enc)">Tambah ke Keranjang</button>
            <button class="btn btn-order" onclick="orderNow(Script Surya Crash - Enc)">Order via WhatsApp</button>
          </div>
        </div><div class="product">
          <h3>Script Surya Crash - No Enc</h3>
          <p>Harga: <strong>Rp 10.000</strong></p>
          <div class="actions">
            <button class="btn btn-add" onclick="addToCart(Script Surya Crash - No Enc;)">Tambah ke Keranjang</button>
            <button class="btn btn-order" onclick="orderNow(Script Surya Crash - No Enc)">Order via WhatsApp</button>
          </div>
        </div><div class="product">
          <h3>Script MD via Tele/WA - Enc</h3>
          <p>Harga: <strong>Rp 5.000</strong></p>
          <div class="actions">
            <button class="btn btn-add" onclick="addToCart(Script MD via Tele/WA - Enc)">Tambah ke Keranjang</button>
            <button class="btn btn-order" onclick="orderNow(Script MD via Tele/WA - Enc)">Order via WhatsApp</button>
          </div>
        </div><div class="product">
          <h3>Script MD via Tele/WA - No Enc</h3>
          <p>Harga: <strong>Rp 7.000</strong></p>
          <div class="actions">
            <button class="btn btn-add" onclick="addToCart(Script MD via Tele/WA - No Enc)">Tambah ke Keranjang</button>
            <button class="btn btn-order" onclick="orderNow(Script MD via Tele/WA - No Enc)">Order via WhatsApp</button>
          </div>
        </div><div class="product">
          <h3>1GB - UNLI</h3>
          <p>Harga: <strong>Rp 1.000</strong></p>
          <div class="actions">
            <button class="btn btn-add" onclick="addToCart(1GB - UNLI)">Tambah ke Keranjang</button>
            <button class="btn btn-order" onclick="orderNow(1GB - UNLI)">Order via WhatsApp</button>
          </div>
        </div><div class="product">
          <h3>RESS PANEL</h3>
          <p>Harga: <strong>Rp 5.000</strong></p>
          <div class="actions">
            <button class="btn btn-add" onclick="addToCart(RESS PANEL)">Tambah ke Keranjang</button>
            <button class="btn btn-order" onclick="orderNow(RESS PANEL)">Order via WhatsApp</button>
          </div>
        </div><div class="product">
          <h3>ADMIN PANEL</h3>
          <p>Harga: <strong>Rp 6.000</strong></p>
          <div class="actions">
            <button class="btn btn-add" onclick="addToCart(ADMIN PANEL)">Tambah ke Keranjang</button>
            <button class="btn btn-order" onclick="orderNow(ADMIN PANEL)">Order via WhatsApp</button>
          </div>
        </div><div class="product">
          <h3>OWNER PANEL</h3>
          <p>Harga: <strong>Rp 7.000</strong></p>
          <div class="actions">
            <button class="btn btn-add" onclick="addToCart(OWNER PANEL)">Tambah ke Keranjang</button>
            <button class="btn btn-order" onclick="orderNow(OWNER PANEL)">Order via WhatsApp</button>
          </div>
        </div><div class="product">
          <h3>PT PANEL</h3>
          <p>Harga: <strong>Rp 10.000</strong></p>
          <div class="actions">
            <button class="btn btn-add" onclick="addToCart(PT PANEL)">Tambah ke Keranjang</button>
            <button class="btn btn-order" onclick="orderNow(PT PANEL)">Order via WhatsApp</button>
          </div>
        </div><div class="product">
          <h3>5GB</h3>
          <p>Harga: <strong>Rp 3.000</strong></p>
          <div class="actions">
            <button class="btn btn-add" onclick="addToCart(5GB)">Tambah ke Keranjang</button>
            <button class="btn btn-order" onclick="orderNow(5GB)">Order via WhatsApp</button>
          </div>
        </div><div class="product">
          <h3>7GB</h3>
          <p>Harga: <strong>Rp 3.500</strong></p>
          <div class="actions">
            <button class="btn btn-add" onclick="addToCart(7GB)">Tambah ke Keranjang</button>
            <button class="btn btn-order" onclick="orderNow(7GB)">Order via WhatsApp</button>
          </div>
        </div><div class="product">
          <h3>10GB</h3>
          <p>Harga: <strong>Rp 4.000</strong></p>
          <div class="actions">
            <button class="btn btn-add" onclick="addToCart(10GB)">Tambah ke Keranjang</button>
            <button class="btn btn-order" onclick="orderNow(10GB)">Order via WhatsApp</button>
          </div>
        </div><div class="product">
          <h3>UNLI</h3>
          <p>Harga: <strong>Rp 4.500</strong></p>
          <div class="actions">
            <button class="btn btn-add" onclick="addToCart(UNLI)">Tambah ke Keranjang</button>
            <button class="btn btn-order" onclick="orderNow(UNLI)">Order via WhatsApp</button>
          </div>
        </div></div>
    </section>

    <!-- HOSTING -->
    <section id="hosting" class="page">
      <h2>Hosting</h2>
      <<div class="product">
        <h3>UNLI</h3>
        <p>Harga: <strong>Rp 5.000</strong></p>
        <div class="actions">
          <button class="btn btn-add" onclick="addToCart('UNLI')">Tambah ke Keranjang</button>
          <button class="btn btn-order" onclick="orderNow('UNLI')">Order via WhatsApp</button>
        </div>
      </div>

      <div class="product">
        <h3>RESS PANEL</h3>
        <p>Harga: <strong>Rp 5.000</strong></p>
        <div class="actions">
          <button class="btn btn-add" onclick="addToCart('RESS PANEL')">Tambah ke Keranjang</button>
          <button class="btn btn-order" onclick="orderNow('RESS PANEL')">Order via WhatsApp</button>
        </div>
      </div>

      <div class="product">
        <h3>ADMIN PANEL</h3>
        <p>Harga: <strong>Rp 6.000</strong></p>
        <div class="actions">
          <button class="btn btn-add" onclick="addToCart('ADMIN PANEL')">Tambah ke Keranjang</button>
          <button class="btn btn-order" onclick="orderNow('ADMIN PANEL')">Order via WhatsApp</button>
        </div>
      </div>

      <div class="product">
        <h3>OWNER PANEL</h3>
        <p>Harga: <strong>Rp 7.000</strong></p>
        <div class="actions">
          <button class="btn btn-add" onclick="addToCart('OWNER PANEL')">Tambah ke Keranjang</button>
          <button class="btn btn-order" onclick="orderNow('OWNER PANEL')">Order via WhatsApp</button>
        </div>
      </div>

      <div class="product">
        <h3>PT PANEL</h3>
        <p>Harga: <strong>Rp 10.000</strong></p>
        <div class="actions">
          <button class="btn btn-add" onclick="addToCart('PT PANEL')">Tambah ke Keranjang</button>
          <button class="btn btn-order" onclick="orderNow('PT PANEL')">Order via WhatsApp</button>
        </div>
      </div>
    </section>

    <!-- SCRIPT -->
    <section id="script" class="page">
      <h2>Script Premium</h2>

      <div class="product">
        <h3>Script Jasher - Enc</h3>
        <p>Harga: <strong>Rp 4.000</strong></p>
        <div class="actions">
          <button class="btn btn-add" onclick="addToCart('Script Jasher - Enc')">Tambah ke Keranjang</button>
          <button class="btn btn-order" onclick="orderNow('Script Jasher - Enc')">Order via WhatsApp</button>
        </div>
      </div>

      <div class="product">
        <h3>Script Jasher - No Enc</h3>
        <p>Harga: <strong>Rp 5.000</strong></p>
        <div class="actions">
          <button class="btn btn-add" onclick="addToCart('Script Jasher - No Enc')">Tambah ke Keranjang</button>
          <button class="btn btn-order" onclick="orderNow('Script Jasher - No Enc')">Order via WhatsApp</button>
        </div>
      </div>

      <div class="product">
        <h3>Script Obf - Enc</h3>
        <p>Harga: <strong>Rp 4.000</strong></p>
        <div class="actions">
          <button class="btn btn-add" onclick="addToCart('Script Obf - Enc')">Tambah ke Keranjang</button>
          <button class="btn btn-order" onclick="orderNow('Script Obf - Enc')">Order via WhatsApp</button>
        </div>
      </div>

      <div class="product">
        <h3>Script Obf - No Enc</h3>
        <p>Harga: <strong>Rp 5.000</strong></p>
        <div class="actions">
          <button class="btn btn-add" onclick="addToCart('Script Obf - No Enc')">Tambah ke Keranjang</button>
          <button class="btn btn-order" onclick="orderNow('Script Obf - No Enc')">Order via WhatsApp</button>
        </div>
      </div>

      <div class="product">
        <h3>Script Surya Crash - Enc</h3>
        <p>Harga: <strong>Rp 5.000</strong></p>
        <div class="actions">
          <button class="btn btn-add" onclick="addToCart('Script Surya Crash - Enc')">Tambah ke Keranjang</button>
          <button class="btn btn-order" onclick="orderNow('Script Surya Crash - Enc')">Order via WhatsApp</button>
        </div>
      </div>

      <div class="product">
        <h3>Script Surya Crash - No Enc</h3>
        <p>Harga: <strong>Rp 10.000</strong></p>
        <div class="actions">
          <button class="btn btn-add" onclick="addToCart('Script Surya Crash - No Enc')">Tambah ke Keranjang</button>
          <button class="btn btn-order" onclick="orderNow('Script Surya Crash - No Enc')">Order via WhatsApp</button>
        </div>
      </div>

      <div class="product">
        <h3>Script MD via Tele/WA - Enc</h3>
        <p>Harga: <strong>Rp 5.000</strong></p>
        <div class="actions">
          <button class="btn btn-add" onclick="addToCart('Script MD via Tele/WA - Enc')">Tambah ke Keranjang</button>
          <button class="btn btn-order" onclick="orderNow('Script MD via Tele/WA - Enc')">Order via WhatsApp</button>
        </div>
      </div>

      <div class="product">
        <h3>Script MD via Tele/WA - No Enc</h3>
        <p>Harga: <strong>Rp 7.000</strong></p>
        <div class="actions">
          <button class="btn btn-add" onclick="addToCart('Script MD via Tele/WA - No Enc')">Tambah ke Keranjang</button>
          <button class="btn btn-order" onclick="orderNow('Script MD via Tele/WA - No Enc')">Order via WhatsApp</button>
        </div>
      </div>
    </section>

    <!-- CART -->
    <section id="cart" class="page">
      <h2>KERANJANG BELANJA</h2>
      <div id="cart-items"><p>Keranjang kosong.</p></div>

      <div class="cart-summary" id="cart-summary">
        <div>Total: <span id="cart-total">Rp 0</span></div>
      </div>

      <button class="checkout-btn" id="checkout-btn" onclick="checkout()">Checkout via WhatsApp</button>
    </section>

    <!-- METODE PEMBAYARAN -->
    <section id="metode" class="page">
      <h2>METODE PEMBAYARAN</h2>
      <div class="product">
        <p><strong>DANA :</strong> 085657179231<br>
        <strong>A/N :</strong> LILIS SUR****</p>
      </div>
      <div class="product">
        <p><strong>GOPAY :</strong> 081274286194<br>
        <strong>A/N :</strong> BELUM PREMIUM</p>
      </div>
      <div class="product">
        <p><strong>QRIS : JIKA PAKAI QRIS WAJIB KIRIM CONTOH (5.000 KIRIMNYA 5.500 BUAT BIAYA ADMIN</strong></p>
        <!-- small image: klik untuk buka popup -->
        <img class="qris" src="https://raw.githubusercontent.com/MasCarli/MasCarli/main/qris.jpg" alt="QRIS" onclick="showQris()">
      </div>
    </section>

    <!-- BANTUAN -->
    <section id="bantuan" class="page">
      <h2>Bantuan 24/7</h2>
      <div class="product">
        <p><strong>WhatsApp :</strong> <a href="https://wa.me/6283125648754" target="_blank" style="color:var(--accent);">CLICK INI</a></p>
        <p><strong>Telegram :</strong> <a href="https://t.me/MasCarlii" target="_blank" style="color:var(--accent);">CLICK INI</a></p>
      </div>
    </section>
  </main>

  <!-- POPUP QRIS -->
  <div class="qris-popup" id="qrisPopup" role="dialog" aria-modal="true" aria-hidden="true" onclick="closeQris()">
    <div class="popup-inner" onclick="event.stopPropagation()">
      <button class="close-btn" aria-label="Tutup QRIS" onclick="closeQris(); event.stopPropagation()">Ã—</button>
      <img src="https://raw.githubusercontent.com/MasCarli/MasCarli/main/qris.jpg" alt="QRIS Besar" />
    </div>
  </div>

  <footer>
    Â© 2025 MasCarli Store | All Rights Reserved
  </footer>

  <script>
    // --- Data + helper (tetap seperti kode asli) ---
    const PRICE_MAP = {
      "Script Jasher - Enc": 4000,
      "Script Jasher - No Enc": 5000,
      "Script Obf - Enc": 4000,
      "Script Obf - No Enc": 5000,
      "Script Surya Crash - Enc": 5000,
      "Script Surya Crash - No Enc": 10000,
      "Script MD via Tele/WA - Enc": 5000,
      "Script MD via Tele/WA - No Enc": 7000,
      "1GB - UNLI": 1000,
      "RESS PANEL": 5000,
      "ADMIN PANEL": 6000,
      "OWNER PANEL": 7000,
      "PT PANEL": 10000,
      "5GB": 3000,
      "7GB": 3500,
      "10GB": 4000,
      "UNLI": 4500
    };

    function formatRp(n){
      return 'Rp ' + n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    }

    let cart = JSON.parse(localStorage.getItem('mascarli_cart') || "[]");

    const cartCountEl = document.getElementById('cart-count');
    const cartItemsEl = document.getElementById('cart-items');
    const cartTotalEl = document.getElementById('cart-total');
    const searchBox = document.getElementById('searchBox');
    const searchResults = document.getElementById('searchResults');

    const ALL_PRODUCTS = Object.keys(PRICE_MAP);

    // init
    updateCartUI();
    renderSearchResults("");

    // NAV / PAGE
    function showPage(id){
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      const el = document.getElementById(id);
      if(el) el.classList.add('active');
      window.scrollTo({top:0, behavior:'smooth'});
      if(id === 'cart') updateCartUI();
    }

    // Add to cart
    function addToCart(productName){
      const price = PRICE_MAP[productName] ?? 0;
      cart.push({ name: productName, price });
      localStorage.setItem('mascarli_cart', JSON.stringify(cart));
      updateCartUI();
      alert(`âœ… ${productName} ditambahkan ke keranjang`);
    }

    // Remove from cart (index)
    function removeFromCart(index){
      if(index >= 0 && index < cart.length){
        cart.splice(index,1);
        localStorage.setItem('mascarli_cart', JSON.stringify(cart));
        updateCartUI();
      }
    }

    // Update cart UI
    function updateCartUI(){
      cartCountEl.textContent = cart.length;
      if(!cartItemsEl) return;
      cartItemsEl.innerHTML = "";
      if(cart.length === 0){
        cartItemsEl.innerHTML = "<p>Keranjang kosong.</p>";
        cartTotalEl.textContent = formatRp(0);
        return;
      }
      cart.forEach((it, idx) => {
        const wrapper = document.createElement('div');
        wrapper.className = 'cart-item';
        const left = document.createElement('div');
        left.className = 'left';
        left.innerHTML = `<h4>${it.name}</h4><p>${formatRp(it.price)}</p>`;
        const right = document.createElement('div');
        right.innerHTML = `<button class="remove-btn" onclick="removeFromCart(${idx})"><i class="fa-solid fa-trash"></i> Hapus</button>`;
        wrapper.appendChild(left);
        wrapper.appendChild(right);
        cartItemsEl.appendChild(wrapper);
      });
      const total = cart.reduce((s,c) => s + Number(c.price || 0), 0);
      cartTotalEl.textContent = formatRp(total);
    }

    // Checkout -> WA
    function checkout(){
      if(cart.length === 0){
        alert("Keranjang masih kosong!");
        return;
      }
      const lines = cart.map(i => `ðŸ›’ ${i.name}`);
      const total = cart.reduce((s,c) => s + Number(c.price || 0), 0);
      const msgLines = [
        "Halo MasCarli Store ðŸ‘‹",
        "Saya ingin memesan produk berikut:",
        ...lines,
        "",
        `Total: ${formatRp(total)}`
      ];
      const message = encodeURIComponent(msgLines.join("\n"));
      const waNumber = "6283125648754";
      const url = `https://wa.me/${waNumber}?text=${message}`;
      window.open(url, "_blank");
    }

    // Quick order single product
    function orderNow(name){
      const price = PRICE_MAP[name] || 0;
      const msg = encodeURIComponent(`Halo MasCarli Store ðŸ‘‹\nSaya ingin order:\nðŸ›’ ${name}\n\nTotal: ${formatRp(price)}`);
      window.open(`https://wa.me/6283125648754?text=${msg}`, "_blank");
    }

    // SEARCH
    function renderSearchResults(q){
      if(!searchResults) return;
      searchResults.innerHTML = "";
      const ql = (q||"").trim().toLowerCase();
      const found = ALL_PRODUCTS.filter(p => p.toLowerCase().includes(ql));
      if(found.length === 0){
        searchResults.innerHTML = "<p>Tidak ada produk ditemukan.</p>";
        return;
      }
      found.forEach(p => {
        const div = document.createElement('div');
        div.className = 'product';
        const price = PRICE_MAP[p] ?? 0;
        div.innerHTML = `
          <h3>${p}</h3>
          <p>Harga: <strong>${formatRp(price)}</strong></p>
          <div class="actions">
            <button class="btn btn-add" onclick="addToCart('${escapeForJs(p)}')">Tambah ke Keranjang</button>
            <button class="btn btn-order" onclick="orderNow('${escapeForJs(p)}')">Order via WhatsApp</button>
          </div>
        `;
        searchResults.appendChild(div);
      });
    }

    searchBox && searchBox.addEventListener('input', e => {
      renderSearchResults(e.target.value);
    });

    function escapeForJs(s){
      return s.replace(/'/g,"\\'");
    }

    // expose some functions globally
    window.removeFromCart = removeFromCart;
    window.addToCart = addToCart;
    window.orderNow = orderNow;
    window.showPage = showPage;
    window.checkout = checkout;
    window.escapeForJs = escapeForJs;

    // --- Popup QRIS (enhanced) ---
    const qrisPopupEl = document.getElementById('qrisPopup');

    function showQris(){
      if(!qrisPopupEl) return;
      qrisPopupEl.classList.add('active');
      qrisPopupEl.setAttribute('aria-hidden', 'false');
      document.body.classList.add('no-scroll');
      // move focus to close button for accessibility
      const closeBtn = qrisPopupEl.querySelector('.close-btn');
      if(closeBtn) closeBtn.focus();
    }

    function closeQris(){
      if(!qrisPopupEl) return;
      qrisPopupEl.classList.remove('active');
      qrisPopupEl.setAttribute('aria-hidden', 'true');
      document.body.classList.remove('no-scroll');
    }

    // close on ESC
    document.addEventListener('keydown', (e) => {
      if(e.key === 'Escape' && qrisPopupEl && qrisPopupEl.classList.contains('active')){
        closeQris();
      }
    });

    // ensure clicking image inside popup doesn't close it (we used stopPropagation in HTML)
    // All done.
  </script>


</body></html>
